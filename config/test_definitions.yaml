# QwenSense Test Definitions
# Example test cases demonstrating different scoring types

tests:
  - question_id: 1
    samples: 2
    template: "Write the text 'Hello {{entity1}}!' inside this file: {{artifacts}}/{{entity2}}.txt"
    scoring_type: "readfile_stringmatch"
    file_to_read: "{{artifacts}}/{{entity2}}.txt"
    expected_content: 'Hello {{entity1}}!'
  
  - question_id: 2
    samples: 2
    template: "Create these files: {{entity1}}.log and {{entity2}}.config in the {{artifacts}} directory"
    scoring_type: "files_exist"
    files_to_check:
      - "{{artifacts}}/{{entity1}}.log"
      - "{{artifacts}}/{{entity2}}.config"
  
  - question_id: 3
    samples: 2
    template: "Respond with only this word: {{entity1}}"
    scoring_type: "stringmatch"
    expected_response: "{{entity1}}"

  - question_id: 4
    samples: 2
    template: "Respond only with these 2 words: {{entity1}} {{entity2}}"
    scoring_type: "stringmatch"
    expected_response: "{{entity1}} {{entity2}}"
  

  - question_id: 5
    samples: 2
    template: "Create this directory structure inside the folder `{{artifacts}}`: {{expected_structure}}"
    scoring_type: "directory_structure"
    expected_structure:
      - "{{artifacts}}/{{entity1}}/"
      - "{{artifacts}}/{{entity1}}/{{entity2}}/"
      - "{{artifacts}}/{{entity1}}/logs/"
      - "{{artifacts}}/{{entity1}}/logs/{{entity3}}.log"
      - "{{artifacts}}/{{entity4}}/"
      - "{{artifacts}}/{{entity4}}/README.md"

  - question_id: 6
    samples: 2
    template: "Read the file {{artifacts}}/{{qs_id}}/{{entity1}}/notes.txt and tell me what line 34 says. Reply only with the contents of that line."
    scoring_type: "stringmatch"
    expected_response: "{{file_line:34:TARGET_FILE}}"
    sandbox_setup:
      type: "create_files"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}/notes.txt"
      content:
        type: "lorem_lines"
        count: 100

  - question_id: 7
    samples: 2
    template: "Read the file {{artifacts}}/{{qs_id}}/{{entity1}}/notes.txt and tell me what 5th word is. Reply only with the word."
    scoring_type: "stringmatch"
    expected_response: "{{file_word:5:TARGET_FILE}}"
    sandbox_setup:
      type: "create_files"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}/notes.txt"
      content:
        type: "lorem_lines"
        count: 100

  - question_id: 8
    samples: 2
    template: "Read the file {{artifacts}}/{{qs_id}}/{{entity1}}/notes.txt and tell me what 35th word is. Reply only with the word."
    scoring_type: "stringmatch"
    expected_response: "{{file_word:35:TARGET_FILE}}"
    sandbox_setup:
      type: "create_files"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}/notes.txt"
      content:
        type: "lorem_lines"
        count: 100

  - question_id: 9
    samples: 2
    template: "Open the file {{artifacts}}/{{qs_id}}/{{entity1}}/logs.txt. How many words are there? Reply only with the count."
    scoring_type: "stringmatch"
    expected_response: "{{file_word_count:TARGET_FILE}}"
    sandbox_setup:
      type: "create_files"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}/logs.txt"
      content:
        type: "lorem_lines"
        count: 2

  - question_id: 10
    samples: 2
    template: "Open the file {{artifacts}}/{{qs_id}}/{{entity1}}/logs.txt. How many words are there? Reply only with the count."
    scoring_type: "stringmatch"
    expected_response: "{{file_word_count:TARGET_FILE}}"
    sandbox_setup:
      type: "create_files"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}/logs.txt"
      content:
        type: "lorem_lines"
        count: 10

  - question_id: 11
    samples: 2
    template: "What is the name of the third person in {{artifacts}}/{{qs_id}}/{{entity1}}/people.csv? Reply only with the name."
    scoring_type: "stringmatch"
    expected_response: "{{csv_value:2:name:TARGET_FILE}}"
    sandbox_setup:
      type: "create_csv"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}/people.csv" 
      content:
        headers: ["name", "age", "city"]
        rows: 100

  - question_id: 12
    samples: 2
    template: "What is the name of the 67th person in {{artifacts}}/{{qs_id}}/{{entity1}}/people.csv? Reply only with the name."
    scoring_type: "stringmatch"
    expected_response: "{{csv_value:67:name:TARGET_FILE}}"
    sandbox_setup:
      type: "create_csv"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}/people.csv" 
      content:
        headers: ["name", "age", "city"]
        rows: 100

  - question_id: 13
    samples: 2
    template: "What is the name of the 469th person in {{artifacts}}/{{qs_id}}/{{entity1}}/people.csv? Reply only with the name."
    scoring_type: "stringmatch"
    expected_response: "{{csv_value:469:name:TARGET_FILE}}"
    sandbox_setup:
      type: "create_csv"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}/people.csv" 
      content:
        headers: ["name", "age", "city"]
        rows: 1000


  # SQLite database examples
  - question_id: 14
    samples: 2
    template: "Query the SQLite database {{artifacts}}/{{qs_id}}/{{entity1}}.db and tell me the name of the first customer. Hint: study the schema first to know how to navigate and inspect the data. Respond only with the name of the first customer."
    scoring_type: "stringmatch"
    expected_response: "{{sqlite_query:SELECT name FROM customers LIMIT 1:TARGET_FILE}}"
    sandbox_setup:
      type: "create_sqlite"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}.db"
      content:
        table_name: "customers"
        columns:
          - {name: "id", type: "auto_id"}
          - {name: "name", type: "TEXT"}
          - {name: "age", type: "INTEGER"}
          - {name: "city", type: "TEXT"}
        rows: 5

  - question_id: 15
    samples: 2
    template: "What is the total amount of all orders in the database {{artifacts}}/{{qs_id}}/{{entity1}}.db? Hint: study the schema first to know how to navigate and inspect the data. Respond only with the total amount."
    scoring_type: "stringmatch"
    expected_response: "{{sqlite_query:SELECT SUM(amount) FROM orders:TARGET_FILE}}"
    sandbox_setup:
      type: "create_sqlite"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}.db"
      content:
        tables:
          - name: "customers"
            columns:
              - {name: "id", type: "auto_id"}
              - {name: "name", type: "TEXT"}
              - {name: "email", type: "TEXT"}
            rows: 3
          - name: "orders"
            columns:
              - {name: "id", type: "auto_id"}
              - {name: "customer_id", type: "INTEGER", foreign_key: "customers.id"}
              - {name: "amount", type: "INTEGER"}
              - {name: "date", type: "DATE"}
            rows: 8

  - question_id: 16
    samples: 2
    template: "Find customers who have orders above 10000 in the database {{artifacts}}/{{qs_id}}/{{entity1}}.db. How many are there? Hint: study the schema first to know how to navigate and inspect the data. Respond only with the number asked."
    scoring_type: "stringmatch"
    expected_response: "{{sqlite_query:SELECT COUNT(DISTINCT c.name) FROM customers c JOIN orders o ON c.id = o.customer_id WHERE o.amount > 10000:TARGET_FILE}}"
    sandbox_setup:
      type: "create_sqlite"
      target_file: "{{artifacts}}/{{qs_id}}/{{entity1}}.db"
      content:
        tables:
          - name: "customers"
            columns:
              - {name: "id", type: "auto_id"}
              - {name: "name", type: "TEXT"}
              - {name: "city", type: "TEXT"}
            rows: 5
          - name: "orders"
            columns:
              - {name: "id", type: "auto_id"}
              - {name: "customer_id", type: "INTEGER", foreign_key: "customers.id"}
              - {name: "amount", type: "INTEGER"}
              - {name: "product", type: "TEXT"}
            rows: 12
